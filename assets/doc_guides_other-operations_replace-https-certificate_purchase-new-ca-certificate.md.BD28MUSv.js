import{_ as t,c as i,a2 as a,o as s}from"./chunks/framework.BQmytedh.js";const n="/assets/Acert1.BpD6RxtX.png",o="/assets/Acert2.Bez2qDc9.png",r="/assets/Acert3.BLXT7-m4.png",l="/assets/Cert2.BLgq_3Id.png",c="/assets/Cert3.eV4gbLO7.png",p="/assets/Cert4.jc2nK5c0.png",h="/assets/Cert5.DQtjrKii.png",d="/assets/Cert6.CyyGTqK0.png",m="/assets/Cert8.KTo3aA4x.png",f="/assets/Cert12.CfZsuCav.png",u="/assets/Cert13.C3k95t3N.png",F=JSON.parse('{"title":"Purchase a new certificate form a Certification Authority (CA)","description":"","frontmatter":{"prev":{"text":"Associate an existing certificate ","link":"/doc/guides/other-operations/replace-https-certificate/with-existing-certificate"},"next":{"text":"Undo certificate replacement process","link":"/doc/guides/other-operations/replace-https-certificate/undo-certificate-replacement"}},"headers":[],"relativePath":"doc/guides/other-operations/replace-https-certificate/purchase-new-ca-certificate.md","filePath":"doc/guides/other-operations/replace-https-certificate/purchase-new-ca-certificate.md"}'),g={name:"doc/guides/other-operations/replace-https-certificate/purchase-new-ca-certificate.md"};function k(C,e,y,w,b,v){return s(),i("div",null,e[0]||(e[0]=[a(`<h1 id="purchase-a-new-certificate-form-a-certification-authority-ca" tabindex="-1">Purchase a new certificate form a Certification Authority (CA) <a class="header-anchor" href="#purchase-a-new-certificate-form-a-certification-authority-ca" aria-label="Permalink to &quot;Purchase a new certificate form a Certification Authority (CA)&quot;">​</a></h1><p>In this section we will show the steps necessary to request a certificate to a Certification Authority. In this specific case we will use <a href="http://ssls.com" target="_blank" rel="noreferrer">ssls.com</a> CA to request the certificate, but you can choose any other CA of your choice, the steps will be similar, if not equal.</p><p>To buy a certificate we first need to generate a <em>Certificate Request</em> file (CSR). Inside it there will be defined the most relevant data of our certificate (domain to register, institution, city, country, etc).</p><p>Then we will submit such CSR file to the CA and after it checks that we own the server of that domain, it will generate and send us the public certificate file(s) to install in our server.</p><h2 id="certificate-request-csr-generation" tabindex="-1">Certificate Request (CSR) generation <a class="header-anchor" href="#certificate-request-csr-generation" aria-label="Permalink to &quot;Certificate Request (CSR) generation&quot;">​</a></h2><p>You need to run the following commands from the same user account that runs the ioChem-BD software to avoid file permission errors.</p><p>First we will move to the <em>ssl/new</em> folder and execute the following commands:</p><div class="language-console vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">iochembd$  cd BASE_PATH/ssl/new</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">iochembd$  openssl genrsa -out pkcs1.key 2048   </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">iochembd$  openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in pkcs1.key -out certificate.key</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">iochembd$  rm pkcs1.key</span></span></code></pre></div><p>Created private key, now go for the certificate request</p><div class="language-console vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">iochembd$  openssl req -new -key certificate.key -out request.csr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">You are about to be asked to enter information that will be incorporated into your certificate request.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">For some fields there will be a default value, If you hit enter the field will be left blank.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-----</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Country Name (2 letter code) [XX]:     ES </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">State or Province Name (full name) []:     Tarragona</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Locality Name (eg, city) [Default City]:    Tarragona</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Organization Name (eg, company) [Default Company Ltd]:     Institution of Chemical Research of Catalonia   #Fill with your institution information, </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Organizational Unit Name (eg, section) []:     Theoretical Group</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Common Name (eg, your name or your servers hostname) []:    iochem-bd.iciq.es                               # Set on Common Name the Domain URL for the certificate</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Email Address []:    contact@example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Please enter the following extra attributes to be sent with your certificate request</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># Leave following fields empty</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">A challenge password []:    </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">An optional company name []:</span></span></code></pre></div><h2 id="purchasing-the-certificate" tabindex="-1">Purchasing the certificate <a class="header-anchor" href="#purchasing-the-certificate" aria-label="Permalink to &quot;Purchasing the certificate&quot;">​</a></h2><p>At this point, on <em>BASE_PATH/create/ssl</em> folder there will be:</p><ul><li>a file called <em>request.csr</em> , that is the certificate request file that we will send to the CA and</li><li>a file called <em>certificate.key</em> with the private key of the custom generated certificate.</li></ul><p>We must now contact the CA to request the public certificate.<br> In the page of the CA we will pick a single domain certificate and then add it the basket.<br> Other type of domain certificate can be select if it better suits your needs, but the single domain one is a cheap solution.</p><p><img src="`+n+'" alt="image0"></p><p>Once selected, customer can select the number of years that the certificate will last until it expires. The longer expiration date, the less certificate updates have to be performed during time.</p><p><img src="'+o+'" alt="image1"></p><p>In the next step, the payment method must be filled in</p><p><img src="'+r+'" alt="image2"></p><p>After the payment has been done, the CA page will display a new certificate in the list, ready to be requested.</p><p><img src="'+l+'" alt="image3"></p><p>The following page will request to paste the content of the CSR file we have generated, so we will copy paste it including the <em>BEGIN NEW CERTIFICATE REQUEST</em> and the <em>END NEW CERTIFICATE REQUEST</em> lines. Paste CSR file content there.</p><p><img src="'+c+'" alt="image4"></p><p>On the next page we will choose the &quot;Java Tomcat&quot; option.</p><p><img src="'+p+'" alt="image5"></p><p>The next page will display the supported domains for this new certificate, please double check this fields are valid.</p><p><img src="'+h+'" alt="image6"></p><h3 id="validating-domain-ownership" tabindex="-1">Validating domain ownership <a class="header-anchor" href="#validating-domain-ownership" aria-label="Permalink to &quot;Validating domain ownership&quot;">​</a></h3><p>The next step is crucial in the certificate generation process. The CA must check that your are the real owner of that domain.<br> To check it you can choose two validation methods:</p><ul><li>To store an specific file inside your web server, so the CA will later retrieve it, verifying you are the domain owner, <a href="./validate-domain-owner.html#validate-domain-owner-using-CA-provided-file">instructions here</a>.</li><li>To send you a verification mail to an specific domain email address , <a href="./validate-domain-owner.html#validate-domain-owner-using-email-address">further instructions here</a>.</li></ul><p><img src="'+d+'" alt="image7"></p><p>After deciding the validation method (via file or email), we must finally fill the contact form.</p><p><img src="'+m+'" alt="image8"></p><p>If you followed the previous steps for validating your certificate, the line of your certificate will now display a green <em>Active</em> button on your account.</p><p><img src="'+f+'" alt="image9"></p><p>If you click the certificate link, you will be presented a page with the option to download the certificate public keys. We will use this files soon for installing the certificate.<br> Click on <em>Download</em> option to get public certificate zip file.</p><p><img src="'+u+`" alt="image10"></p><h2 id="installing-the-certificate" tabindex="-1">Installing the certificate <a class="header-anchor" href="#installing-the-certificate" aria-label="Permalink to &quot;Installing the certificate&quot;">​</a></h2><p>Once we have the certificate .zip file we will extract its contents into the BASE_PATH/create/ssl folder</p><div class="language-console vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">iochembd$  cp iochem-bd.iciq.es.zip BASE_PATH/create/ssl    </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">iochembd$  cd BASE_PATH/create/ssl</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">iochembd$  unzip iochem-bd.iciq.es.zip</span></span></code></pre></div><p>After the extraction you must have on <em>BASE_PATH/create/ssl</em> folder at least the following files:</p><ul><li>A <em>certificate.key</em> file with your private key</li><li>A <em>*.crt</em> file with your public key certificate in X509 PEM format</li><li>An optional <em>*.bundle</em> with the intermediate CA certificates in X509 PEM format</li></ul><p>With the following command you can extract.</p><p>Now you can follow the instructions from <a href="./with-existing-certificate.html">Associate an existing certificate</a> page.</p>`,44)]))}const _=t(g,[["render",k]]);export{F as __pageData,_ as default};
